From bb2952f0f5c3ec3a816dd3bdc9e940a9476d3b7e Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Tue, 19 Mar 2013 21:27:05 +0000
Subject: [PATCH 5/5] qmake: mingw fixes for library naming

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 qmake/generators/win32/mingw_make.cpp |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/qmake/generators/win32/mingw_make.cpp b/qmake/generators/win32/mingw_make.cpp
index accb6f8..d08f9c0 100644
--- a/qmake/generators/win32/mingw_make.cpp
+++ b/qmake/generators/win32/mingw_make.cpp
@@ -77,7 +77,7 @@ QString MingwMakefileGenerator::escapeDependencyPath(const QString &path) const
 
 QString MingwMakefileGenerator::getLibTarget()
 {
-    return QString("lib" + project->first("TARGET") + project->first("TARGET_VERSION_EXT") + ".a");
+    return QString(project->first("QMAKE_PREFIX_SHLIB") + project->first("TARGET") + project->first("TARGET_VERSION_EXT") + ".a");
 }
 
 bool MingwMakefileGenerator::findLibraries()
@@ -298,7 +298,7 @@ void MingwMakefileGenerator::init()
         QString destDir = "";
         if(!project->first("DESTDIR").isEmpty())
             destDir = Option::fixPathToTargetOS(project->first("DESTDIR") + Option::dir_sep, false, false);
-        project->values("MINGW_IMPORT_LIB").prepend(destDir + "lib" + project->first("TARGET")
+	project->values("MINGW_IMPORT_LIB").prepend(destDir + project->first("TARGET")
                                                          + project->first("TARGET_VERSION_EXT") + ".a");
 	project->values("QMAKE_LFLAGS").append(QString("-Wl,--out-implib,") + project->first("MINGW_IMPORT_LIB"));
     }
-- 
1.7.4.1

