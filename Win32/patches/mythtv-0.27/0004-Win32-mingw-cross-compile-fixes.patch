From 944e2041d72f01c46dc609517774f20ebae3cb06 Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Mon, 11 Mar 2013 18:56:55 +0000
Subject: [PATCH 004/207] Win32: mingw cross compile fixes

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 mythtv/libs/libmythbase/mythsocket.cpp             |    2 +-
 .../libs/libmythtv/recorders/iptvstreamhandler.cpp |    2 +-
 .../libs/libmythtv/recorders/rtp/rtpdatapacket.h   |    4 ++++
 3 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/mythtv/libs/libmythbase/mythsocket.cpp b/mythtv/libs/libmythbase/mythsocket.cpp
index bb85b92..5ed4348 100644
--- a/mythtv/libs/libmythbase/mythsocket.cpp
+++ b/mythtv/libs/libmythbase/mythsocket.cpp
@@ -12,7 +12,7 @@
 // setsockopt -- has to be after Qt includes for Q_OS_WIN definition
 #if defined(Q_OS_WIN)
 #include <winsock2.h>
-#include <Ws2tcpip.h>
+#include <ws2tcpip.h>
 #include <stdio.h>
 #else
 #include <sys/socket.h>
diff --git a/mythtv/libs/libmythtv/recorders/iptvstreamhandler.cpp b/mythtv/libs/libmythtv/recorders/iptvstreamhandler.cpp
index 432d248..de13d42 100644
--- a/mythtv/libs/libmythtv/recorders/iptvstreamhandler.cpp
+++ b/mythtv/libs/libmythtv/recorders/iptvstreamhandler.cpp
@@ -225,7 +225,7 @@ void IPTVStreamHandler::run(void)
                 dest_addr.toString().toLatin1().constData());
             imr.imr_interface.s_addr = htonl(INADDR_ANY);
             if (setsockopt(fd, IPPROTO_IP, IP_ADD_MEMBERSHIP,
-                           &imr, sizeof(imr)) < 0)
+                           (const char*)&imr, sizeof(imr)) < 0)
             {
                 LOG(VB_GENERAL, LOG_ERR, LOC +
                     "setsockopt - IP_ADD_MEMBERSHIP " + ENO);
diff --git a/mythtv/libs/libmythtv/recorders/rtp/rtpdatapacket.h b/mythtv/libs/libmythtv/recorders/rtp/rtpdatapacket.h
index 6586cc0..8709f8e 100644
--- a/mythtv/libs/libmythtv/recorders/rtp/rtpdatapacket.h
+++ b/mythtv/libs/libmythtv/recorders/rtp/rtpdatapacket.h
@@ -6,7 +6,11 @@
 #ifndef _RTP_DATA_PACKET_H_
 #define _RTP_DATA_PACKET_H_
 
+#ifdef _WIN32
+#include <winsock2.h>
+#else
 #include <arpa/inet.h> // for ntohs()/ntohl()
+#endif
 
 #include "udppacket.h"
 #include "mythlogging.h"
-- 
1.7.9.5

