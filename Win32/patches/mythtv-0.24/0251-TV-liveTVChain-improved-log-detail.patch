From 801a5f4f988e0ff00714273ef43f3cb435aa28dd Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Sun, 7 Jul 2013 16:47:08 +0100
Subject: [PATCH 251/285] TV: liveTVChain improved log detail

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 mythtv/libs/libmythtv/livetvchain.cpp |   21 ++++++++++-----------
 1 file changed, 10 insertions(+), 11 deletions(-)

diff --git a/mythtv/libs/libmythtv/livetvchain.cpp b/mythtv/libs/libmythtv/livetvchain.cpp
index 6b5ea6e..e342542 100644
--- a/mythtv/libs/libmythtv/livetvchain.cpp
+++ b/mythtv/libs/libmythtv/livetvchain.cpp
@@ -454,6 +454,15 @@ ProgramInfo *LiveTVChain::GetSwitchProgram(bool &discont, bool &newtype,
     return pginfo;
 }
 
+static QString toString(const LiveTVChainEntry &v)
+{
+    return QString("%1: %2 (%3 to %4)%5")
+        .arg(v.cardtype,6).arg(v.chanid,4)
+        .arg(v.starttime.time().toString())
+        .arg(v.endtime.time().toString())
+        .arg(v.discontinuity?" discontinuous":" continuous");
+}
+
 /** \fn LiveTVChain::SwitchTo(int)
  *  \brief Sets the recording to switch to.
  *  \param num Index of recording to switch to, -1 for last recording.
@@ -480,8 +489,7 @@ void LiveTVChain::SwitchTo(int num)
     {
         LiveTVChainEntry e;
         GetEntryAt(num, e);
-        QString msg = QString("%1_%2")
-            .arg(e.chanid).arg(e.starttime.toString("yyyyMMddhhmmss"));
+        QString msg = ::toString(e);
         VERBOSE(VB_PLAYBACK, LOC + "Entry@"<<num<<": '"<<msg<<"'");
     }
 }
@@ -572,15 +580,6 @@ void LiveTVChain::DelHostSocket(MythSocket *sock)
     m_inUseSocks.removeAll(sock);
 }
 
-static QString toString(const LiveTVChainEntry &v)
-{
-    return QString("%1: %2 (%3 to %4)%5")
-        .arg(v.cardtype,6).arg(v.chanid,4)
-        .arg(v.starttime.time().toString())
-        .arg(v.endtime.time().toString())
-        .arg(v.discontinuity?" discontinuous":"");
-}
-
 QString LiveTVChain::toString() const
 {
     QMutexLocker lock(&m_lock);
-- 
1.7.9.5

