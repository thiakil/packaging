From a47c735511d2df671b936e9c57fd96973f32aab1 Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Tue, 6 Aug 2013 18:51:27 +0100
Subject: [PATCH 188/227] mythbackend: Fix SEGV in MpegRecorder::run when
 exiting LiveTV

Start FE live TV from demo recorder.  Exit and BE crashes.

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 mythtv/libs/libmythtv/mpegrecorder.cpp |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/mythtv/libs/libmythtv/mpegrecorder.cpp b/mythtv/libs/libmythtv/mpegrecorder.cpp
index 32221f7..2207861 100644
--- a/mythtv/libs/libmythtv/mpegrecorder.cpp
+++ b/mythtv/libs/libmythtv/mpegrecorder.cpp
@@ -1017,6 +1017,8 @@ void MpegRecorder::run(void)
                 _error = "Device EOF detected";
             }
         }
+        else if (readfd < 0)
+            continue;
         else
         {
             if (has_select)
-- 
1.7.9.5

