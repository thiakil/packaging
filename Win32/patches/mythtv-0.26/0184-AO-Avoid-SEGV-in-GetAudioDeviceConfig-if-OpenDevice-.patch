From f1f7efb4b031b8ce13795fcfbcfc0e482943c65b Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Wed, 31 Jul 2013 18:44:45 +0100
Subject: [PATCH 184/227] AO: Avoid SEGV in GetAudioDeviceConfig if OpenDevice
 returns 0

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 mythtv/libs/libmyth/audio/audiooutput.cpp |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/mythtv/libs/libmyth/audio/audiooutput.cpp b/mythtv/libs/libmyth/audio/audiooutput.cpp
index fda8a4c..15ae38d 100644
--- a/mythtv/libs/libmyth/audio/audiooutput.cpp
+++ b/mythtv/libs/libmyth/audio/audiooutput.cpp
@@ -276,8 +276,11 @@ AudioOutput::AudioDeviceConfig* AudioOutput::GetAudioDeviceConfig(
     AudioOutput::AudioDeviceConfig *adc;
 
     AudioOutput *ao = OpenAudio(name, QString::null, willsuspendpa);
-    aosettings = *(ao->GetOutputSettingsCleaned());
-    delete ao;
+    if (ao)
+    {
+        aosettings = *(ao->GetOutputSettingsCleaned());
+        delete ao;
+    }
 
     if (aosettings.IsInvalid())
     {
-- 
1.7.9.5

